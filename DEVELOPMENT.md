# å¼€å‘è¿›åº¦æ–‡æ¡£

> æ­¤æ–‡æ¡£ç”¨äºè¿½è¸ªå¼€å‘è¿›åº¦ï¼Œé˜²æ­¢ Claude Code ä¸Šä¸‹æ–‡ä¸¢å¤±ã€‚
> æ¯æ¬¡å¼€å‘ç»“æŸæ—¶æ›´æ–°ï¼Œä¸‹æ¬¡ç»§ç»­æ—¶è®© Claude é˜…è¯»æ­¤æ–‡ä»¶ã€‚

## é¡¹ç›®æ¦‚è§ˆ

| é¡¹ç›® | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| åç«¯ (server) | âœ… åŸºç¡€å®Œæˆ | Rust + Axumï¼Œä»£ç ç»“æ„å®Œæ•´ |
| å‰ç«¯ (client) | âœ… åŸºç¡€å®Œæˆ | UniApp X + pnpm monorepo |

## æŠ€æœ¯é€‰å‹ç¡®è®¤

- [x] æ•°æ®åº“ï¼šMySQL + MongoDB åŒæ”¯æŒ
- [x] åç«¯æ¡†æ¶ï¼šAxum
- [x] å‰ç«¯å·¥å…·ï¼špnpm workspace
- [x] ç¾¤ç»„æƒé™ï¼šéœ€è¦ï¼ˆç¾¤ä¸»/ç®¡ç†å‘˜/æˆå‘˜ï¼‰

---

## Phase 1: åŸºç¡€æ¶æ„ âœ…

### 1.1 é¡¹ç›®åˆå§‹åŒ–
- [x] åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„
- [x] ç¼–å†™ README.md
- [x] ç¼–å†™ DEVELOPMENT.md
- [x] åˆå§‹åŒ– Rust åç«¯é¡¹ç›®
- [x] åˆå§‹åŒ– UniApp X å‰ç«¯é¡¹ç›®

### 1.2 æ•°æ®åº“è®¾è®¡
- [x] è®¾è®¡ç”¨æˆ·è¡¨ (users)
- [x] è®¾è®¡ç¾¤ç»„è¡¨ (groups)
- [x] è®¾è®¡ç¾¤ç»„æˆå‘˜è¡¨ (group_members)
- [x] è®¾è®¡è´¦æœ¬è¡¨ (ledgers)
- [x] è®¾è®¡è´¦å•è¡¨ (bills)
- [x] è®¾è®¡åˆ†ç±»è¡¨ (categories)

### 1.3 åç«¯åŸºç¡€æ¨¡å—
- [x] é…ç½®ç®¡ç†æ¨¡å— (server/src/config/)
- [x] æ•°æ®åº“è¿æ¥æŠ½è±¡å±‚ (server/src/repositories/)
- [x] é”™è¯¯å¤„ç† (server/src/error/)
- [x] æ—¥å¿—ç³»ç»Ÿ (tracing)

---

## Phase 2: ç”¨æˆ·è®¤è¯ âœ…

### 2.1 ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- [x] ç”¨æˆ·æ³¨å†Œ API (POST /api/v1/auth/register)
- [x] ç”¨æˆ·ç™»å½• API (POST /api/v1/auth/login)
- [x] JWT ä¸­é—´ä»¶ (server/src/middleware/auth.rs)
- [x] åˆ·æ–° Token (POST /api/v1/auth/refresh)

### 2.2 è®¿å®¢æ¨¡å¼
- [x] è®¿å®¢æ ‡è¯†ç”Ÿæˆ (å‰ç«¯æœ¬åœ°)
- [x] æœ¬åœ°æ•°æ®ç»“æ„è®¾è®¡ (å‰ç«¯ store)

---

## Phase 3: è®°è´¦æ ¸å¿ƒåŠŸèƒ½ ğŸš§

### 3.1 è´¦æœ¬ç®¡ç†
- [ ] åˆ›å»ºè´¦æœ¬ API
- [ ] è´¦æœ¬åˆ—è¡¨ API
- [ ] ç¼–è¾‘/åˆ é™¤è´¦æœ¬ API

### 3.2 è´¦å•ç®¡ç†
- [ ] åˆ›å»ºè´¦å• APIï¼ˆæ”¶å…¥/æ”¯å‡ºï¼‰
- [ ] è´¦å•åˆ—è¡¨ API
- [ ] ç¼–è¾‘/åˆ é™¤è´¦å• API
- [ ] è´¦å•è¯¦æƒ… API

### 3.3 åˆ†ç±»ç®¡ç†
- [ ] é»˜è®¤åˆ†ç±»åˆå§‹åŒ–
- [ ] è‡ªå®šä¹‰åˆ†ç±» API
- [ ] åˆ†ç±»å›¾æ ‡

---

## Phase 4: ç¾¤ç»„åŠŸèƒ½

### 4.1 ç¾¤ç»„ç®¡ç†
- [ ] åˆ›å»ºç¾¤ç»„ API
- [ ] é‚€è¯·æˆå‘˜ API
- [ ] æˆå‘˜ç®¡ç† APIï¼ˆæƒé™ï¼‰
- [ ] é€€å‡º/è§£æ•£ç¾¤ç»„ API

### 4.2 å…±äº«è´¦æœ¬
- [ ] ç¾¤ç»„è´¦æœ¬åˆ›å»º
- [ ] å…±äº«è®°è´¦
- [ ] æˆå‘˜è´¦å•è®°å½•

---

## Phase 5: ç»Ÿè®¡ä¸æŠ¥è¡¨ âœ…

- [x] æ—¥/å‘¨/æœˆ/å¹´ç»Ÿè®¡ API
- [x] åˆ†ç±»ç»Ÿè®¡ API
- [x] è¶‹åŠ¿å›¾è¡¨
- [ ] å¯¼å‡ºåŠŸèƒ½

---

## Phase 6: å‰ç«¯å¼€å‘ âœ… (åŸºç¡€UIå®Œæˆ)

### 6.1 åŸºç¡€é¡µé¢
- [x] ç™»å½•/æ³¨å†Œé¡µ (pages/login/index.vue)
- [x] é¦–é¡µï¼ˆè´¦å•åˆ—è¡¨ï¼‰(pages/index/index.vue)
- [x] è®°è´¦é¡µ (pages/bill/add.vue)
- [x] ç»Ÿè®¡é¡µ (pages/stats/index.vue) - å®Œæ•´åŠŸèƒ½
- [x] æˆ‘çš„é¡µ (pages/mine/index.vue)

### 6.2 ç¾¤ç»„ç›¸å…³
- [x] ç¾¤ç»„åˆ—è¡¨ (pages/group/index.vue)
- [ ] ç¾¤ç»„è¯¦æƒ…
- [ ] æˆå‘˜ç®¡ç†

---

## å½“å‰å¼€å‘çŠ¶æ€

```
ğŸ“ å½“å‰ä½ç½®: Phase 5 ç»Ÿè®¡æ¨¡å—å®Œæˆ
âœ… åç«¯æœåŠ¡å™¨: http://localhost:3000/api/v1/
âœ… å‰ç«¯æœåŠ¡å™¨: http://localhost:8080/
ğŸ”§ å·²å®Œæˆ:
   - åç«¯ä»£ç ç»“æ„å®Œæ•´ï¼ˆMySQL/Memory Repositoryï¼‰
   - å‰ç«¯åŸºç¡€é¡µé¢ã€è®¿å®¢æ¨¡å¼è®°è´¦åŠŸèƒ½
   - APIæµ‹è¯•é€šè¿‡ï¼ˆæ³¨å†Œã€ç™»å½•ã€åˆ†ç±»ã€è´¦æœ¬ï¼‰
   - å®Œæ•´ç»Ÿè®¡åŠŸèƒ½ï¼ˆæ—¥/å‘¨/æœˆ/å¹´ã€åˆ†ç±»ç»Ÿè®¡ã€è¶‹åŠ¿å›¾è¡¨ï¼‰
```

## å·²åˆ›å»ºçš„æ–‡ä»¶ç»“æ„

### åç«¯ (server/)
```
server/
â”œâ”€â”€ Cargo.toml              # ä¾èµ–é…ç½®
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ default.toml        # é»˜è®¤é…ç½®
â”‚   â””â”€â”€ development.toml    # å¼€å‘é…ç½®
â””â”€â”€ src/
    â”œâ”€â”€ main.rs             # å…¥å£
    â”œâ”€â”€ lib.rs              # åº“å¯¼å‡º
    â”œâ”€â”€ config/             # é…ç½®æ¨¡å—
    â”œâ”€â”€ api/                # API è·¯ç”±
    â”œâ”€â”€ services/           # ä¸šåŠ¡é€»è¾‘
    â”œâ”€â”€ repositories/       # æ•°æ®è®¿é—®å±‚
    â”‚   â”œâ”€â”€ traits/         # Repository æ¥å£
    â”‚   â”œâ”€â”€ mysql/          # MySQL å®ç°
    â”‚   â””â”€â”€ mongodb/        # MongoDB å®ç°
    â”œâ”€â”€ models/             # æ•°æ®æ¨¡å‹
    â”œâ”€â”€ middleware/         # ä¸­é—´ä»¶
    â”œâ”€â”€ dto/                # è¯·æ±‚/å“åº”DTO
    â”œâ”€â”€ error/              # é”™è¯¯å¤„ç†
    â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
```

### å‰ç«¯ (client/)
```
client/
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-workspace.yaml
â””â”€â”€ packages/
    â”œâ”€â”€ app/                # ä¸»åº”ç”¨
    â”‚   â”œâ”€â”€ src/
    â”‚   â”‚   â”œâ”€â”€ pages/      # é¡µé¢
    â”‚   â”‚   â”œâ”€â”€ store/      # Pinia çŠ¶æ€
    â”‚   â”‚   â”œâ”€â”€ App.vue
    â”‚   â”‚   â””â”€â”€ main.ts
    â”‚   â”œâ”€â”€ pages.json
    â”‚   â””â”€â”€ manifest.json
    â”œâ”€â”€ api/                # API å°è£…
    â”‚   â””â”€â”€ src/
    â”‚       â”œâ”€â”€ request.ts
    â”‚       â”œâ”€â”€ auth.ts
    â”‚       â”œâ”€â”€ bill.ts
    â”‚       â””â”€â”€ group.ts
    â””â”€â”€ shared/             # å…±äº«å·¥å…·
        â””â”€â”€ utils/
```

## æœ€è¿‘æ›´æ–°

| æ—¥æœŸ | æ›´æ–°å†…å®¹ |
|------|----------|
| 2025-12-28 | å®ŒæˆåŸºç¡€æ¶æ„ï¼šåç«¯ä»£ç ç»“æ„ã€å‰ç«¯åŸºç¡€é¡µé¢ã€APIè®¾è®¡æ–‡æ¡£ |
| 2025-12-28 | å®Œæˆå†…å­˜Repositoryå®ç°ï¼ˆæ— éœ€æ•°æ®åº“å³å¯æµ‹è¯•ï¼‰ |
| 2025-12-28 | åˆ›å»ºtest_server.rsæµ‹è¯•æœåŠ¡å™¨ |
| 2025-12-28 | å‰ç«¯å¼€å‘æœåŠ¡å™¨å¯åŠ¨æˆåŠŸï¼Œå¯åœ¨æµè§ˆå™¨è®¿é—® |
| 2025-12-28 | å®Œæˆç»Ÿè®¡æ¨¡å—ï¼šåç«¯API + å‰ç«¯é¡µé¢ |

---

## ç¼–è¯‘è¯´æ˜

### åç«¯
```bash
cd server
# éœ€è¦å…ˆåŒæ„ Xcode è®¸å¯è¯ï¼ˆmacOSï¼‰
sudo xcodebuild -license
cargo build
```

### å‰ç«¯
```bash
cd client
pnpm install
pnpm dev
```

---

## å¦‚ä½•ç»§ç»­å¼€å‘

ä¸‹æ¬¡å¼€å‘æ—¶ï¼Œå‘Šè¯‰ Claudeï¼š

```
è¯·é˜…è¯» DEVELOPMENT.md äº†è§£å½“å‰è¿›åº¦ï¼Œç„¶åç»§ç»­å¼€å‘
```

### å»ºè®®çš„ä¸‹ä¸€æ­¥ä»»åŠ¡

1. **å®ç°è´¦æœ¬ CRUD API** (server/src/api/ledger.rs)
2. **å®ç°è´¦å• CRUD API** (server/src/api/bill.rs)
3. **å®Œå–„å‰ç«¯é¡µé¢ä¸åç«¯å¯¹æ¥**
4. **æ·»åŠ ç¾¤ç»„ç›¸å…³ API**
